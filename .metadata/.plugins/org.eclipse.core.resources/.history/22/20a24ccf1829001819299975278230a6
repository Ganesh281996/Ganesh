package com.bridgelabz.utility;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;

public class Clinique 
{
	String doctorPath="/home/bridgeit/Ganesh/BasicProject/Files/Doctor.json";
	String patientPath="/home/bridgeit/Ganesh/BasicProject/Files/Patient.json";
	String appointmentsPath="/home/bridgeit/Ganesh/BasicProject/Files/Appointments.json";
	
	public boolean addDoctor(String name,int id,String specialization,
							String availability,int noOfPatients)
	{
		boolean flag=false;
		JSONArray jsonArray=Utility.readJsonArrayFile(doctorPath);
		JSONObject jsonObject=null;
		for(int i=0;i<jsonArray.size();i++)
		{
			jsonObject=(JSONObject)jsonArray.get(i);
			if(jsonObject.get("Id")==null)
			{
				flag=false;
			}
			else
			{
				flag=true;
			}
		}
		if(flag==true)
		{
			jsonObject=new JSONObject();
			jsonObject.put("DoctorName", name);
			jsonObject.put("Id", id);
			jsonObject.put("Specialization", specialization);
			jsonObject.put("Availability", availability);
			jsonObject.put("NoOfPatients", noOfPatients);
			jsonArray.add(jsonObject);
			Utility.writeJsonArrayFile(doctorPath, jsonArray);
			return true;
		}
		return false;
	}
	
	public void addPatient(Patient Patient)
	{
		JSONObject jsonObject=Utility.readJsonFile(patientPath);
		JSONObject jsonPatient=new JSONObject();
		
		jsonPatient.put("Name", Patient.getPatientName());
		jsonPatient.put("Mobile", Patient.getMobileNumber());
		
		jsonObject.put(Patient.getPatientId(), jsonPatient);
		Utility.writeJsonFile(patientPath, jsonObject);
	}
}